# 结构体

结构体会将多个不同类型的值组合成一个单一的值，以便你能把它们作为一个单元来处理。给定一个结构体，你可以读取和修改它的各个组件。结构体也可以具有关联的方法，以对其组件进行操作。

Rust 有 3 种结构体类型：具名字段型结构体、元组型结构体和单元型结构体。

## 具名字段型结构体

```rust
struct GrayscaleMap {
  pixels: Vec<u8>,
  size: (usize, usize)
}

let width = 1024;
let height = 576;

let image = GrayscaleMap {
  pixels: vec![0; width * height],
  size: (width, height)
}
```

结构体默认情况下是私有的，仅在声明它们的模块及其子模块中可见。可以通过在结构体的定义前加上 pub 来使结构体在其模块外部可见。结构体中的每个字段默认情况下也是私有的。

```rust
// 共有字段
pub struct GrayscaleMap {
  pub pixels: Vec<u8>,
  pub size: (usize, usize)
}
```

创建具名字段结构体的值时，可以使用另一个相同类型的结构体为省略的那些字段提供值。在结构体表达式中，如果具有字段后面跟着 `.. EXPR`，则任何未提及的字段都会从 EXPR 中获取它们的值。

## 元组型结构体

第二种结构体类型称为元组型结构体，因为它类似于元组：

```rust
struct Bounds(usize, usize);

let image_bounds = Bounds(1024, 768);
```

元组型结构体保存的值称为元素，就像元组的值一样。和元组一样，可以访问它们

```rust
assert_eq!(image_bounds.0 * image_bounds.1, 786432);
```

表达式 `Bounds(1024, 768)`看起来像一个函数调用，实际上它确实是，即定义这种类型时也隐式定义了一个函数：

```rust
fn Bounds(elem0: usize, elem1: usize) -> Bounds {
  // ..
}
```

## 单元型结构体
这一种结构体有点晦涩难懂，因为它声明了一个根本没有元素的结构体类型：
```rust
struct Onesuch;
```
这种类型的值不占用内存，很像单元类型 `()`, Rust 即不会在内存中实际存储单元型结构体的值，也不会生成代码来对它们进行操作，因为仅通过值的类型它就能知道关于值的所有信息。但从逻辑上讲，空结构体是一种可以像其他任何类型一样有值的类型。